# 机械磁盘（硬盘）

机械硬盘由盘片与磁头组成（一般1-2片），每片两面皆可使用。磁盘靠盘片的
高速旋转托起磁头(盘片下边的磁头?)，使之接近又不接触盘片，以便读写磁盘。

磁盘最小物理单元为扇区，（一般为512Byte）每条磁道上的扇区数目相同，
因为外围磁道周长大， 因而外围磁道数据密度低，可靠性更强，因而MBR
（Main Boot Record)位于最 外围的0柱面0磁头1扇区。N柱面M磁头S扇区为
绝对 地址表示法，操作系统(DOS)一 般采用相对地址表示法，如2275扇区，
二者间一一对应，但操作系统的相对扇区 地址初始扇区并非0柱面0磁头1扇区，
而是1柱面0磁头1扇区，因而操作系统无法 读取0柱面扇区，只有BIOS（UEFI）
可以。

对于操作系统而言，磁盘的最小单元并非其物理分区，而是多个扇区组成的簇
(cluster) 或块(block)，每块大小由文件系统决定（通常大小有4k， 8k，16k）
所谓4k测试即测试硬件小文件的读写能力，这通常比大文件读写能力更重要，
大文件传输并非日常计算机的主要任务，小文件读写才是。文件存储以簇为
单位，一个文件至少占用一个簇，即使实际文件大小小于一个簇，所以文件
系统簇的大小分配十分重要，既要支持足够的硬盘空间（在文件系统所能支持
的块数量下，越大的存储空间意味着越大的簇单位）， 同时又要保证合理的
磁盘利用率，不致因为太多小文件浪费空间。簇的大小可在BPB（BIOS Parameter
Block，BIOS参数块）获得，BPB是DBR（DOS Boot Record）的一部分，DBR位于
0柱面1磁头1扇区。也是磁盘的最重要的控制文件之一.

磁盘分区以柱面为单位，估计是因为这样可同步磁头移动 ，减小操作复杂性；
另一方面，可同时读写，提高速度（不同步也行）。

格式化好的磁盘，按记录数据的作用不同可分为MBR, DBR, FAT(File Assign
Table), BD(Boot Directory) 和数据区(至少对DOS而言如此)。前四个位于
外磁道上（0磁道）。 

MBR使用了0柱面0磁道1扇区（512Bytes）， 前446Bytes为主引导记录，后64
Bytes为分区表（DPT：Disk Partition Table）， 剩余2Bytes为可选项。
（0柱面0磁道的其它扇区呢？不用了？）
DPT最多包含4条记录，每条16Bytes，其中只有一个标记为可引导（booting），
可引导记录的第一个字节为80H， 其它为00H（非活跃分区）
MBR有操作系统安装程序产生，不同操作系统所转载程序也不尽相同。

DBR位于0柱面1磁头1扇区，完成DOS系统文件（IO.SYS, MSDOS.SYS）的定位与
转载，BPB用来描述本 DOS分区的磁盘信息，BPB位于DBR偏移0BH处，共13Bytes
FAT位于DBR之后。 (其它扇区呢？)

## Partitions
^Q^: what's the difference between different partitioins, such as a
    EFI System Partition(ESP) and a Linux File Partition ???
